(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,n){e.exports=n(78)},46:function(e,t,n){},51:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(37),o=n.n(c),i=(n(46),n(3)),l=n(4),s=n(7),u=n(6),h=n(8),m=n(13),p=(n(51),n(39)),d=n(81),b=n(10),f=n.n(b),v=n(15),E=n(18),y=n.n(E),g=n(21),j=function(){function e(){Object(i.a)(this,e),this.userManager=void 0;this.userManager=new g.UserManager({authority:"http://localhost:8081/auth/realms/CryptoInc",client_id:"crypto-portfolio-react",redirect_uri:"http://localhost:3000/callback.html",response_type:"id_token token",scope:"openid profile email"}),this.userManager.events.addUserLoaded,g.Log.logger=console,g.Log.level=g.Log.INFO}return Object(l.a)(e,[{key:"isAuthenticated",value:function(){var e=Object(v.a)(f.a.mark(function e(){var t=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.getUser().then(function(t){e(null!=t&&null!=t.access_token&&!t.expired)})}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"completeLogin",value:function(){this.userManager.signinRedirectCallback().then(function(e){return sessionStorage.setItem("access_token",e.access_token)}).catch(function(e){return console.log(e)})}},{key:"getUser",value:function(){return this.userManager.getUser()}},{key:"login",value:function(){return this.userManager.signinRedirect()}},{key:"renewToken",value:function(){return this.userManager.signinSilent()}},{key:"logout",value:function(){return this.userManager.signoutRedirect()}}],[{key:"getInstance",value:function(){return void 0===e.instance&&(e.instance=new e),e.instance}}]),e}();j.instance=void 0;var O=function(){return function(){var e=Object(v.a)(f.a.mark(function e(t){var n,a,r,c,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getInstance().getUser();case 2:if(!(n=e.sent)||null==n.access_token||n.expired){e.next=11;break}return a={Authorization:"Bearer "+n.access_token},e.next=7,y.a.get("http://localhost:8185/portfolio",{headers:a});case 7:r=e.sent,c=r.data,o={type:"GotPositions",positions:c.positions,isAuthenticated:!0},t(o);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(v.a)(f.a.mark(function t(n){var a,r,c,o;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getInstance().getUser();case 2:if(!(a=t.sent)||null==a.access_token||a.expired){t.next=11;break}return r={Authorization:"Bearer "+a.access_token},t.next=7,y.a.get("http://localhost:8185/portfolio/transactions/"+e,{headers:r});case 7:c=t.sent,o=c.data,n({type:"GotTransactions",transactions:o,isAuthenticated:!0});case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},C=function(e){var t=e.position;return a.createElement("tr",null,a.createElement("th",null,t.cryptoCurrency.symbol),a.createElement("th",null,t.quantity),a.createElement("th",null,t.value))},S=n(20),T=n(2),w=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={cryptoSymbol:"",type:"",quantity:0,price:0},n.onChange=n.onChange.bind(Object(T.a)(Object(T.a)(n))),n.onSelectChange=n.onSelectChange.bind(Object(T.a)(Object(T.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(T.a)(Object(T.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"onSelectChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={cryptoSymbol:this.state.cryptoSymbol,price:this.state.price,quantity:this.state.quantity,transactionType:this.state.type};void 0!==this.props.addTransaction&&this.props.addTransaction(t)}},{key:"render",value:function(){return a.createElement("div",{className:"container add_trans_div"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("fieldset",null,a.createElement("label",null,"Symbol"),a.createElement("select",{name:"cryptoSymbol",required:!0,value:this.state.cryptoSymbol,onChange:this.onSelectChange},a.createElement("option",{value:""},"----Select----"),a.createElement("option",{value:"BTC"},"BTC"),a.createElement("option",{value:"LTC"},"LTC")),a.createElement("label",null,"Symbol"),a.createElement("select",{name:"type",required:!0,value:this.state.type,onChange:this.onSelectChange},a.createElement("option",{value:""},"----Select----"),a.createElement("option",{value:"BUY"},"BUY"),a.createElement("option",{value:"SELL"},"SELL")),a.createElement("label",null,"Quantity"),a.createElement("input",{type:"number",name:"quantity",required:!0,value:this.state.quantity,onChange:this.onChange}),a.createElement("label",null,"Price"),a.createElement("input",{type:"number",name:"price",required:!0,value:this.state.price,onChange:this.onChange}),a.createElement("button",{name:"addTransactionBtn",type:"submit"},"Add Transaction"))))}}]),t}(a.Component),x=Object(m.b)(null,function(e){return{addTransaction:function(t,n){return e(function(e){return function(){var t=Object(v.a)(f.a.mark(function t(n){var a,r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getInstance().getUser();case 2:if(!(a=t.sent)){t.next=9;break}return r={Authorization:"Bearer "+a.access_token},t.next=7,y.a.post("http://localhost:8185/portfolio/transactions",e,{headers:r});case 7:t.sent,n(O());case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(w),N=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement("table",{className:"table table-hover"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Symbol"),a.createElement("th",null,"Quantity"),a.createElement("th",null,"Value"))),a.createElement("tbody",null,this.props.positions.map(function(e){return a.createElement(C,{key:e.cryptoCurrency.symbol,position:e})}))),a.createElement(x,null))}}]),t}(a.Component),q=function(e){return a.createElement("tr",null,a.createElement("th",null,a.createElement("input",{id:e.transaction.id,name:"selectedTransaction",type:"checkbox",onChange:e.handleCheckboxChange,value:e.transaction.id})),a.createElement("th",null,e.transaction.id),a.createElement("th",null,e.transaction.symbol),a.createElement("th",null,e.transaction.transactionType),a.createElement("th",null,e.transaction.quantity),a.createElement("th",null,e.transaction.price))},_=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleCheckboxChange=function(e){n.toggleCheckbox(e.target.value)},n.toggleCheckbox=function(e){n.state.selectedTransactionIds.has(e)?n.state.selectedTransactionIds.delete(e):n.state.selectedTransactionIds.add(e)},n.state={selectedTransactionIds:new Set},n.handleSubmit=n.handleSubmit.bind(Object(T.a)(Object(T.a)(n))),n.handleCheckboxChange=n.handleCheckboxChange.bind(Object(T.a)(Object(T.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadTransactions()}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(e.target),this.props.deleteTransactions(Array.from(this.state.selectedTransactionIds))}},{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("table",{className:"table table-hover"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,"Transaction Id"),a.createElement("th",null,"Symbol"),a.createElement("th",null,"Type"),a.createElement("th",null,"Quantity"),a.createElement("th",null,"Price"))),a.createElement("tbody",null,this.props.transactions.map(function(t,n){return a.createElement(q,{key:t.id,handleCheckboxChange:e.handleCheckboxChange,transaction:t})}))),a.createElement("button",{name:"deleteTransactionBtn",type:"submit"},"Delete Transactions")))}}]),t}(a.Component),A=Object(m.b)(function(e){return{transactions:e.portfolioTransactions.transactions}},function(e){return{loadTransactions:function(t){return e(k(t))},deleteTransactions:function(t){return e(function(e){return function(){var t=Object(v.a)(f.a.mark(function t(n){var a,r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getInstance().getUser();case 2:if(!(a=t.sent)){t.next=10;break}return r={Authorization:"Bearer "+a.access_token},t.next=7,y.a.delete("http://localhost:8185/portfolio/transactions/",{data:{id:e},headers:r});case 7:t.sent,n(k()),n(O());case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(_),I=n(80),Q=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.createElement("nav",{className:"navbar navbar-expand-sm  navbar-light crypt_nav"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"navbar-header"},a.createElement("a",{className:"navbar-brand",href:"#"},"Spring - Crypto Portfolio")),a.createElement("ul",{className:"nav navbar-nav"},a.createElement("li",{className:"nav-item active"},a.createElement(I.a,{className:"nav-link",to:"/portfolio"},"Home")),a.createElement("li",{className:"nav-item"},a.createElement(I.a,{className:"nav-link",to:"/portfolio/transactions"},"Transactions")),a.createElement("li",{className:"nav-item"},a.createElement(I.a,{className:"nav-link",to:"/support"},"Support")))))}}]),t}(a.Component),B=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).authService=void 0,n.authService=j.getInstance(),n.state={},n.handleSubmit=n.handleSubmit.bind(Object(T.a)(Object(T.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.authService.login()}},{key:"render",value:function(){return a.createElement("div",{className:"container add_trans_div"},a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("button",{name:"loginFormBtn",type:"submit"},"Login")))}}]),t}(a.Component),M=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadPositions()}},{key:"render",value:function(){var e=this;return this.props.authenticated?a.createElement("div",{className:"container"},a.createElement(Q,null),a.createElement(d.a,null,a.createElement(p.a,{path:"/portfolio/transactions",component:A}),a.createElement(p.a,{path:"/portfolio",component:function(){return a.createElement(N,{positions:e.props.positions})}}))):a.createElement("div",{className:"container"},a.createElement(Q,null),a.createElement(p.a,{component:B}))}}]),t}(a.Component),P=Object(m.b)(function(e){return{positions:e.portfolio.positions,authenticated:e.portfolio.isAuthenticated}},function(e){return{loadPositions:function(){return e(O())}}})(M),U=(n(77),n(83)),L=n(82),F=n(16),R=n(40),D={positions:[],isAuthenticated:!1},z={queries:[]},G={transactions:[]},J=Object(F.c)({portfolio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GotPositions":return{positions:t.positions,isAuthenticated:t.isAuthenticated};default:return e}},portfolioTransactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GotTransactions":return{transactions:t.transactions};default:return e}},support:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GotSupportQueries":return{queries:t.queries};default:return e}}});var W=function(e){var t=e.query;return a.createElement("tr",{onClick:e.onTableRowClick,id:t.id},a.createElement("th",null,t.subject),a.createElement("th",null,t.username),a.createElement("th",null,t.resolved),a.createElement("th",null,t.creationTime))},Y=function(e){var t=e.post;return a.createElement("tr",null,a.createElement("th",null,"Query"),a.createElement("th",null,t.content))},H=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={displayPostsForQuery:""},n.onTableRowClick=n.onTableRowClick.bind(Object(T.a)(Object(T.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onTableRowClick",value:function(e){this.setState({displayPostsForQuery:e.currentTarget.id})}},{key:"render",value:function(){var e=this,t=[];if(this.props.queries&&(t=this.props.queries),this.state.displayPostsForQuery){var n=t.find(function(t){return t.id===e.state.displayPostsForQuery});if(n)return a.createElement(a.Fragment,null,a.createElement("table",null,a.createElement("tr",null,a.createElement("td",null,"Subject"),a.createElement("td",null,n.subject)),a.createElement(Y,{post:n.posts[0]})))}return a.createElement(a.Fragment,null,a.createElement("table",{className:"table table-hover"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Subject"),a.createElement("th",null,"Username"),a.createElement("th",null,"Resolved"),a.createElement("th",null,"Created"))),a.createElement("tbody",null,t.map(function(t){return a.createElement(W,{onTableRowClick:e.onTableRowClick,key:t.creationTime,query:t})}))))}}]),t}(a.Component),V=function(){return function(){var e=Object(v.a)(f.a.mark(function e(t){var n,a,r,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getInstance().getUser();case 2:if(!(n=e.sent)){e.next=11;break}return a={Authorization:"Bearer "+n.access_token},e.next=7,y.a.get("http://localhost:8185/support",{headers:a});case 7:r=e.sent,c=r.data,t({type:"GotSupportQueries",queries:c});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},$=n(84),K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={subject:"",content:"",navToMainSupportPage:!1},n.onChange=n.onChange.bind(Object(T.a)(Object(T.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(T.a)(Object(T.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t={subject:this.state.subject,content:this.state.content};void 0!==this.props.addQuery&&(this.setState({subject:"",content:"",navToMainSupportPage:!0}),this.props.addQuery(t))}},{key:"onChange",value:function(e){this.setState(Object(S.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return this.state.navToMainSupportPage?a.createElement($.a,{to:"/support"}):a.createElement("div",{className:"form-group"},a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},a.createElement("fieldset",null,a.createElement("div",{className:"form-group"},a.createElement("label",{className:"col-sm-2 control-label"},"Subject"),a.createElement("input",{type:"string",name:"subject",required:!0,value:this.state.subject,onChange:this.onChange})),a.createElement("div",{className:"form-group"},a.createElement("label",{className:"col-sm-2 control-label"},"Query"),a.createElement("textarea",{name:"content",required:!0,value:this.state.content,onChange:this.onChange})),a.createElement("button",{name:"addQueryBtn",type:"submit"},"Add Query"))))}}]),t}(a.Component),X=Object(m.b)(null,function(e){return{addQuery:function(t,n){return e(function(e){return console.log(e),function(){var t=Object(v.a)(f.a.mark(function t(n){var a,r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getInstance().getUser();case 2:if(!(a=t.sent)){t.next=9;break}return r={Authorization:"Bearer "+a.access_token},t.next=7,y.a.put("http://localhost:8185/support",e,{headers:r});case 7:t.sent,n(V());case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(K),Z=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadQueries()}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"container"},a.createElement(Q,null),a.createElement(I.a,{className:"nav-link",to:"/support/compose_query"},"Add New"),a.createElement(d.a,null,a.createElement(p.a,{path:"/support/compose_query",component:X}),a.createElement(p.a,{path:"/support",component:function(){return a.createElement(H,{queries:e.props.queries})}})))}}]),t}(a.Component),ee=Object(m.b)(function(e){return{queries:e.support.queries}},function(e){return{loadQueries:function(){return e(V())}}})(Z),te=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{store:(e={},Object(F.e)(J,e,Object(F.d)(Object(F.a)(R.a))))},r.a.createElement(U.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(L.a,{path:"/login",component:B}),r.a.createElement(L.a,{path:"/portfolio",component:P}),r.a.createElement(L.a,{path:"/support",component:ee}))));var e}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.fd868786.chunk.js.map